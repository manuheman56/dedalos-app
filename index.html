<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DÃ‰DALO'S â€“ Asistente</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1b1b1b">
  <style>
    body { margin: 0; font-family: sans-serif; background: #000; color: #f2e6c9; text-align: center; }
    .screen { display: none; padding: 20px; }
    .active { display: block; }
    h1 { color: #d4af37; }
    .action-dots { display: flex; justify-content: center; gap: 10px; margin: 15px; }
    .dot { width: 25px; height: 25px; border-radius: 50%; border: 2px solid #d4af37; }
    .used { background: #8b0000; }
    button { background: #8b0000; color: white; border: none; padding: 12px 20px; margin: 5px; border-radius: 5px; font-weight: bold; }
    .secondary { background: #444; }
    .inventory { display: flex; justify-content: space-around; background: #1a1a1a; padding: 10px; border-radius: 8px; margin-top: 20px; }
    .item { opacity: 0.3; font-size: 0.8em; }
    .item.owned { opacity: 1; color: #d4af37; }
  </style>
</head>
<body>

<div id="intro" class="screen active">
  <h1>DÃ‰DALOâ€™S</h1>
  <p>El Laberinto del Minotauro</p>
  <button onclick="goTo('players')">Comenzar Partida</button>
</div>

<div id="players" class="screen">
  <h2>Â¿CuÃ¡ntos sois?</h2>
  <button onclick="startGame(3)">3</button>
  <button onclick="startGame(4)">4</button>
  <button onclick="startGame(5)">5</button>
  <button onclick="startGame(6)">6</button>
</div>

<div id="game" class="screen">
  <h2 id="turn-title">Jugador 1</h2>
  <div class="action-dots" id="dots-container">
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
  </div>
  <button onclick="useAction()">Gastar AcciÃ³n</button>
  <button class="secondary" onclick="nextTurn()">Siguiente Turno</button>

  <div class="inventory">
    <div id="item-axe" class="item" onclick="toggleItem('item-axe')">ğŸª“ Hacha</div>
    <div id="item-key" class="item" onclick="toggleItem('item-key')">ğŸ”‘ Llave</div>
    <div id="item-shield" class="item" onclick="toggleItem('item-shield')">ğŸ›¡ï¸ Escudo</div>
  </div>
  
  <details style="margin-top:20px; text-align: left;">
    <summary>ğŸ“– Ayuda RÃ¡pida (Manual)</summary>
    <ul>
      <li><strong>3 Acciones:</strong> Mover, Rotar, o Usar Objeto.</li>
      <li><strong>Muros:</strong> No se pueden atravesar muros negros.</li>
      <li><strong>Minotauro:</strong> Se mueve 2 casillas tras el turno del jugador activo.</li>
    </ul>
  </details>
</div>

<script>
let currentP = 1, totalP = 0, used = 0;

function goTo(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function startGame(num) {
  totalP = num;
  goTo('game');
  resetDots();
}

function useAction() {
  if (used < 3) {
    document.querySelectorAll('.dot')[used].classList.add('used');
    used++;
  }
}

function nextTurn() {
  currentP = (currentP % totalP) + 1;
  used = 0;
  document.getElementById('turn-title').innerText = "Jugador " + currentP;
  resetDots();
}

function resetDots() {
  document.querySelectorAll('.dot').forEach(d => d.classList.remove('used'));
}

function toggleItem(id) {
  document.getElementById(id).classList.toggle('owned');
}

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js');
}
</script>
</body>
</html>