<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>D√âDALO'S ‚Äì El Laberinto</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1b1b1b">
  <style>
    :root {
      --gold: #d4af37;
      --blood: #8b0000;
      --parchment: #f2e6c9;
      --shadow: #0a0a0a;
    }
    body {
      margin: 0;
      font-family: 'Georgia', serif;
      background: var(--shadow);
      color: var(--parchment);
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .screen { display: none; padding: 25px; animation: fadeIn 1s ease-in-out; }
    .active { display: flex; flex-direction: column; align-items: center; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    h1 { font-size: 3em; color: var(--gold); text-shadow: 0 0 15px rgba(212, 175, 55, 0.5); margin-bottom: 5px; }
    .subtitle { font-style: italic; color: #888; margin-bottom: 30px; }

    /* Estilo Pergamino */
    .card {
      background: rgba(30, 30, 30, 0.8);
      border: 1px solid var(--gold);
      padding: 20px;
      border-radius: 5px;
      box-shadow: inset 0 0 20px #000;
      width: 90%;
      max-width: 400px;
    }

    /* Acciones */
    .action-container { margin: 20px 0; text-align: center; }
    .action-dots { display: flex; justify-content: center; gap: 15px; margin-bottom: 15px; }
    .dot { width: 35px; height: 35px; border: 2px solid var(--gold); border-radius: 50%; position: relative; }
    .dot.used::after { content: '‚úï'; color: var(--blood); font-size: 24px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: bold; }

    /* Botones */
    button {
      background: linear-gradient(to bottom, #4a0000, #2a0000);
      color: var(--gold);
      border: 1px solid var(--gold);
      padding: 15px 30px;
      font-size: 1.1em;
      text-transform: uppercase;
      letter-spacing: 2px;
      cursor: pointer;
      margin: 10px 0;
      width: 100%;
      transition: 0.3s;
    }
    button:active { background: var(--gold); color: #000; }
    button.secondary { background: transparent; border-color: #555; color: #888; }

    /* Minotauro y Reglas */
    .log { font-size: 0.9em; background: #000; padding: 15px; border-left: 3px solid var(--blood); margin-top: 20px; text-align: left; }
    .inventory { display: flex; gap: 10px; margin-top: 15px; }
    .item { padding: 5px 10px; border: 1px solid #444; font-size: 0.8em; opacity: 0.4; }
    .item.active { opacity: 1; border-color: var(--gold); color: var(--gold); }
  </style>
</head>
<body>

<div id="intro" class="screen active">
  <h1>D√âDALO</h1>
  <p class="subtitle">"Solo el ingenio te sacar√° de Creta"</p>
  <div class="card">
    <p>Has sido arrojado al laberinto. El Minotauro acecha en las sombras.</p>
    <button onclick="goTo('players')">Entrar al Laberinto</button>
  </div>
</div>

<div id="players" class="screen">
  <h2>Tributos en Peligro</h2>
  <div class="card">
    <p>¬øCu√°ntos almas buscan la salida?</p>
    <button onclick="startGame(3)">3 Jugadores</button>
    <button onclick="startGame(4)">4 Jugadores</button>
    <button onclick="startGame(5)">5 Jugadores</button>
    <button onclick="startGame(6)">6 Jugadores</button>
  </div>
</div>

<div id="game" class="screen">
  <h2 id="turn-title" style="color: var(--gold);">Turno del Jugador 1</h2>
  
  <div class="card">
    <div class="action-dots">
      <div class="dot" id="d1"></div><div class="dot" id="d2"></div><div class="dot" id="d3"></div>
    </div>
    <button onclick="spendAction()">Gastar Acci√≥n</button>
    
    <div class="log" id="game-log">
      El laberinto est√° en silencio...
    </div>

    <div class="inventory">
      <div id="inv-h" class="item" onclick="toggleItem('inv-h')">ü™ì Hacha</div>
      <div id="inv-l" class="item" onclick="toggleItem('inv-l')">üîë Llave</div>
      <div id="inv-e" class="item" onclick="toggleItem('inv-e')">üõ°Ô∏è Escudo</div>
    </div>

    <button class="secondary" onclick="finishTurn()" style="margin-top: 20px;">Terminar Turno</button>
  </div>

  <details style="margin-top: 20px; color: #888;">
    <summary>Codex de Reglas</summary>
    <ul style="text-align: left; font-size: 0.85em;">
      <li><strong>Acciones:</strong> Mover, Rotar Loseta o Usar Objeto.</li>
      <li><strong>Losetas:</strong> Solo puedes rotar la loseta donde est√°s si no hay muros negros bloqueando el giro.</li>
      <li><strong>El Minotauro:</strong> Se mueve 2 casillas tras cada turno.</li>
    </ul>
  </details>
</div>

<script>
let currentP = 1, totalP = 0, actions = 0;
const log = document.getElementById('game-log');

function goTo(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function startGame(n) { totalP = n; goTo('game'); resetTurn(); }

function spendAction() {
  if (actions < 3) {
    actions++;
    document.getElementById('d' + actions).classList.add('used');
    log.innerHTML = "Has realizado una acci√≥n. Te quedan " + (3-actions) + ".";
  }
}

function toggleItem(id) { document.getElementById(id).classList.toggle('active'); }

function finishTurn() {
  log.innerHTML = "<span style='color:var(--blood)'>‚ö†Ô∏è EL MINOTAURO SE MUEVE:</span> Avanza 2 casillas hacia el tributo m√°s cercano.";
  setTimeout(() => {
    currentP = (currentP % totalP) + 1;
    resetTurn();
  }, 3500);
}

function resetTurn() {
  actions = 0;
  document.getElementById('turn-title').innerText = "Turno del Jugador " + currentP;
  document.querySelectorAll('.dot').forEach(d => d.classList.remove('used'));
  if(currentP !== 1) log.innerHTML = "El laberinto ha cambiado. Es tu turno.";
}

if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
</script>
</body>
</html>