<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DÃ©daloâ€™s â€“ GuÃ­a Narrada</title>
<link rel="manifest" href="manifest.json">
<style>
  :root { --gold: #e6c15a; --blood: #8b0000; --dark: #1a120b; }
  body { margin:0; font-family: 'Segoe UI', sans-serif; background: radial-gradient(circle at top, #2b1b0f, #000); color:#f5e9c8; text-align:center; }
  .screen { display:none; padding:20px; max-width:600px; margin:auto; animation: fadeIn 0.4s; }
  .active { display:block; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  h1, h2 { color: var(--gold); text-transform: uppercase; }
  .card { background: var(--dark); border: 2px solid var(--gold); border-radius: 14px; padding: 20px; margin: 15px 0; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
  button { background: var(--blood); color: white; border: 1px solid var(--gold); border-radius: 12px; padding: 14px 22px; margin: 8px; font-size: 16px; cursor: pointer; font-weight: bold; }
  .btn-audio { background: transparent; border: 1px solid var(--gold); color: var(--gold); font-size: 14px; padding: 8px 12px; }
  .manual-img { width: 100%; border-radius: 8px; border: 1px solid #444; margin-bottom: 10px; }
  .action-orb { display: inline-block; width: 45px; height: 45px; border: 2px solid var(--gold); border-radius: 50%; line-height: 45px; margin: 5px; font-size: 1.2em; }
  .used { background: var(--gold); color: black; }
</style>
</head>
<body>

<div id="intro" class="screen active">
  <h1>DÃ‰DALOâ€™S</h1>
  <div class="card">
    <img src="entrada.jpg" class="manual-img">
    <p>DÃ©dalo construyÃ³ el laberinto, y tÃº eres el explorador. PartirÃ¡s desde el centro: <b>La Entrada</b>.</p>
    <button onclick="go('context','02_contexto.mp3')">Comenzar</button>
    <button class="btn-audio" onclick="playAudio('01_intro.mp3')">ğŸ”Š Escuchar Inicio</button>
  </div>
</div>

<div id="context" class="screen">
  <div class="card">
    <h2>El Laberinto</h2>
    <p>Un lugar donde los pasillos se mueven y el <b>Minotauro</b> acecha en cada sombra.</p>
    <button onclick="go('goal','03_objetivo.mp3')">Â¿CÃ³mo gano?</button>
  </div>
</div>

<div id="goal" class="screen">
  <div class="card">
    <h2>Tu Objetivo</h2>
    <img src="salida.jpg" class="manual-img">
    <p>Gana el primer jugador que llegue a una de las <b>Salidas</b>.</p>
    <button onclick="go('turn','04_turno.mp3')">Â¿QuÃ© hago en mi turno?</button>
  </div>
</div>

<div id="turn" class="screen">
  <div class="card">
    <h2>El Turno</h2>
    <p>Tienes 3 acciones. Puedes:</p>
    <p>ğŸ§± Colocar loseta (Â¡Cuidado con los muros!)<br>ğŸ‘£ Moverte o ğŸ¤œ Empujar</p>
    <button onclick="go('special','08_especiales.mp3')">Ver Losetas Especiales</button>
    <button class="btn-audio" onclick="playAudio('04_turno.mp3')">ğŸ”Š ExplicaciÃ³n</button>
  </div>
</div>

<div id="special" class="screen">
  <div class="card">
    <h2>Losetas Especiales</h2>
    <p>â­ <b>Estrellas:</b> Se ponen sobre otras con menos estrellas.</p>
    <p>ğŸš« <b>Derrumbe:</b> Anula una salida por completo.</p>
    <p>ğŸ‚ <b>Minotauro:</b> Obligatorio jugarlo si te sale.</p>
    <button onclick="go('players')">Â¡A jugar!</button>
  </div>
</div>

<div id="players" class="screen">
  <div class="card">
    <h2>NÂº de Exploradores</h2>
    <button onclick="start(3)">3</button>
    <button onclick="start(4)">4</button>
    <button onclick="start(5)">5</button>
    <button onclick="start(6)">6</button>
  </div>
</div>

<div id="game" class="screen">
  <h2 id="turnTitle">Turno 1</h2>
  <div class="card">
    <div id="orbs">
      <div id="orb1" class="action-orb">1</div>
      <div id="orb2" class="action-orb">2</div>
      <div id="orb3" class="action-orb">3</div>
    </div>
    <button onclick="useAction()">Usar AcciÃ³n</button>
    <button onclick="endTurn()" style="background:#444;">Pasar Turno</button>
  </div>
  <button class="btn-audio" onclick="playAudio('10_ayuda.mp3')">â“ Ayuda</button>
</div>

<script>
let players=0, current=1, actions=3, currentAudio=null;

function playAudio(file){
  if(currentAudio){ currentAudio.pause(); currentAudio.currentTime = 0; }
  currentAudio = new Audio('audio/' + file);
  currentAudio.play().catch(e => console.log("Audio bloqueado por navegador"));
}

function go(id, audioFile=null){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(audioFile) playAudio(audioFile);
}

function start(p){
  players=p; current=1; actions=3;
  go('game', '06_movimiento.mp3');
  update();
}

function update(){
  document.getElementById('turnTitle').innerText='Explorador '+current;
  for(let i=1; i<=3; i++){
    document.getElementById('orb'+i).className = i <= (3-actions) ? 'action-orb used' : 'action-orb';
  }
}

function useAction(){
  if(actions>0){ actions--; update(); }
}

function endTurn(){
  playAudio('07_minotauro.mp3');
  current = (current % players) + 1;
  actions = 3;
  update();
}
</script>
</body>
</html>