<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>D√âDALO'S ‚Äì El C√≥dice del Laberinto</title>
  <style>
    :root { --gold: #d4af37; --blood: #8b0000; --stone: #1a1a1a; --text: #f0e6d2; }
    
    body { 
      margin: 0; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
      background: #050505; color: var(--text); display: flex; flex-direction: column; align-items: center;
    }

    /* Est√©tica Profesional */
    .screen { display: none; padding: 20px; width: 100%; max-width: 600px; box-sizing: border-box; animation: fadeIn 0.6s ease; }
    .active { display: flex; flex-direction: column; }
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

    .codex-card { 
      background: linear-gradient(145deg, #1e1e1e, #111);
      border: 1px solid var(--gold); border-radius: 12px; padding: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.8); margin-bottom: 20px;
    }

    h1 { font-size: 2.5em; color: var(--gold); letter-spacing: 5px; text-align: center; margin: 10px 0; text-shadow: 0 0 10px rgba(212,175,55,0.3); }
    h2 { color: var(--gold); border-bottom: 1px solid var(--gold); padding-bottom: 8px; font-size: 1.2em; text-transform: uppercase; }

    /* Visualizaci√≥n de Reglas */
    .rule-item { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 20px; text-align: left; }
    .rule-img { width: 80px; height: 80px; border: 2px solid var(--gold); border-radius: 8px; flex-shrink: 0; object-fit: cover; background: #000; }
    .rule-text b { color: var(--gold); font-size: 1.1em; display: block; margin-bottom: 4px; }
    .rule-text p { margin: 0; font-size: 0.9em; line-height: 1.4; color: #ccc; }

    /* Botones Premium */
    button { 
      background: linear-gradient(to bottom, var(--blood), #500000);
      color: white; border: 1px solid var(--gold); border-radius: 8px;
      padding: 16px; font-size: 1em; font-weight: bold; cursor: pointer;
      text-transform: uppercase; letter-spacing: 2px; transition: all 0.2s;
    }
    button:active { transform: translateY(2px); filter: brightness(1.2); }
    .btn-secondary { background: transparent; border-color: #444; color: #888; margin-top: 10px; }

    /* Tracker de Partida */
    .action-row { display: flex; justify-content: center; gap: 20px; margin: 25px 0; }
    .action-orb { 
      width: 55px; height: 55px; border: 2px solid #333; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2em; font-weight: bold; color: #444; transition: 0.4s;
    }
    .action-orb.active { border-color: var(--gold); color: var(--gold); box-shadow: 0 0 15px rgba(212,175,55,0.2); }
    .action-orb.used { background: var(--gold); color: black; border-color: var(--gold); transform: scale(0.9); }

    .nav-tabs { display: flex; gap: 10px; margin-bottom: 15px; }
    .tab { flex: 1; padding: 10px; font-size: 0.7em; border: 1px solid #333; border-radius: 4px; color: #666; cursor: pointer; }
    .tab.active { border-color: var(--gold); color: var(--gold); }
  </style>
</head>
<body>

<audio id="snd-ambiente" loop src="ambiente.mp3"></audio>
<audio id="snd-rugido" src="rugido.mp3"></audio>

<div id="intro" class="screen active">
  <h1>D√âDALO</h1>
  <div class="codex-card">
    <img src="entrada.jpg" style="width:100%; border-radius:8px; margin-bottom:15px; border:1px solid #333;">
    <p style="text-align:center; font-style:italic; color: var(--gold);">"El laberinto no es solo muros, es un ser vivo que te caza."</p>
    <p>Hab√©is sido elegidos como tributos. Solo uno ver√° la luz del sol al llegar a las puertas doradas.</p>
    <button onclick="startVoiceIntro()">Iniciar C√≥dice de Reglas</button>
  </div>
</div>

<div id="manual" class="screen">
  <h2>C√≥dice de Reglas</h2>
  <div class="codex-card">
    <div class="rule-item">
      <img src="camino.jpg" class="rule-img">
      <div class="rule-text">
        <b>Movimiento y Caminos</b>
        <p>En tu turno, gasta acciones para colocar losetas o moverte. Las losetas deben tocar un camino abierto. ¬°No puedes atravesar muros negros!</p>
      </div>
    </div>
    <div class="rule-item">
      <img src="minotauro.jpg" class="rule-img">
      <div class="rule-text">
        <b>La Bestia (El Minotauro)</b>
        <p>Aparece con su loseta. Al final de cada turno, se mueve 2 casillas hacia el jugador m√°s cercano. Si te pilla, vuelves al inicio.</p>
      </div>
    </div>
    <div class="rule-item">
      <img src="salida.jpg" class="rule-img">
      <div class="rule-text">
        <b>Victoria</b>
        <p>Debes llegar a una de las 4 esquinas del tablero con la puerta de salida dorada para ganar.</p>
      </div>
    </div>
    <button onclick="goTo('special-tiles')">Ver Losetas Especiales</button>
  </div>
</div>

<div id="special-tiles" class="screen">
  <h2>Losetas del Destino</h2>
  <div class="codex-card">
    <div class="rule-item" onclick="speak('La estrella te otorga supervelocidad: 4 acciones este turno.')">
      <img src="estrella.jpg" class="rule-img">
      <div class="rule-text">
        <b>‚≠ê La Estrella</b>
        <p>¬°Poder divino! Si usas esta loseta, ganas +1 acci√≥n extra en este turno.</p>
      </div>
    </div>
    <div class="rule-item" onclick="speak('El derrumbe destruye un camino. Col√≥calo sobre una loseta para bloquearla.')">
      <img src="derrumbe.jpg" class="rule-img">
      <div class="rule-text">
        <b>üö´ El Derrumbe</b>
        <p>Cierra caminos. Col√≥cala encima de una loseta ya jugada para anularla.</p>
      </div>
    </div>
    <button onclick="goTo('players')">Entrar al Laberinto</button>
  </div>
</div>

<div id="players" class="screen">
  <h2>Configurar Tributos</h2>
  <div class="codex-card">
    <p>¬øCu√°ntos h√©roes participan?</p>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
      <button onclick="initGame(3)">3 H√©roes</button>
      <button onclick="initGame(4)">4 H√©roes</button>
      <button onclick="initGame(5)">5 H√©roes</button>
      <button onclick="initGame(6)">6 H√©roes</button>
    </div>
  </div>
</div>

<div id="game" class="screen">
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <h1 id="player-title" style="font-size:1.5em; margin:0;">H√âROE I</h1>
    <span id="turn-count" style="color:var(--gold); font-weight:bold;">Turno 1</span>
  </div>
  
  <div class="codex-card">
    <div class="action-row">
      <div id="orb1" class="action-orb active">1</div>
      <div id="orb2" class="action-orb active">2</div>
      <div id="orb3" class="action-orb active">3</div>
    </div>
    
    <button onclick="spendAction()" id="btn-action">Ejecutar Acci√≥n</button>
    <div id="game-msg" style="margin-top:20px; font-style:italic; color:#aaa;">El laberinto aguarda tu movimiento...</div>
    
    <button class="btn-secondary" onclick="nextTurn()">Finalizar Turno</button>
  </div>
  
  <button class="btn-secondary" style="font-size:0.7em;" onclick="goTo('manual')">Revisar C√≥dice</button>
</div>

<script>
let currentP = 1, totalP = 0, actions = 0, globalTurn = 1;

function goTo(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function speak(text) {
  window.speechSynthesis.cancel();
  const msg = new SpeechSynthesisUtterance(text);
  const voices = window.speechSynthesis.getVoices();
  msg.voice = voices.find(v => v.lang.includes('es')) || voices[0];
  msg.pitch = 0.4; msg.rate = 0.85;
  window.speechSynthesis.speak(msg);
}

function startVoiceIntro() {
  document.getElementById('snd-ambiente').play();
  speak("Tributos, bienvenidos. Antes de pisar las losetas, deb√©is conocer las leyes. Vuestro objetivo es la salida dorada. Ten√©is tres acciones. El Minotauro os busca.");
  goTo('manual');
}

function initGame(n) { totalP = n; goTo('game'); updateUI(); }

function spendAction() {
  if (actions < 3) {
    actions++;
    const orb = document.getElementById('orb' + actions);
    orb.classList.add('used');
    orb.classList.remove('active');
    document.getElementById('game-msg').innerText = "Acci√≥n " + actions + " completada con √©xito.";
    if (actions === 3) {
      document.getElementById('game-msg').innerHTML = "<b style='color:var(--gold)'>¬°Acciones agotadas! Termina tu turno.</b>";
    }
  }
}

function nextTurn() {
  document.getElementById('snd-rugido').play();
  document.getElementById('game-msg').innerHTML = "<b style='color:var(--blood)'>EL MINOTAURO AVANZA 2 CASILLAS.</b>";
  
  setTimeout(() => {
    currentP = (currentP % totalP) + 1;
    if (currentP === 1) globalTurn++;
    actions = 0;
    updateUI();
  }, 3000);
}

function updateUI() {
  document.getElementById('player-title').innerText = "H√âROE " + currentP;
  document.getElementById('turn-count').innerText = "Ronda " + globalTurn;
  document.getElementById('game-msg').innerText = "Planea tus 3 movimientos.";
  for(let i=1; i<=3; i++) {
    const orb = document.getElementById('orb' + i);
    orb.classList.remove('used');
    orb.classList.add('active');
  }
}
</script>
</body>
</html>